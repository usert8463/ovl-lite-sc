const { WA_CONF2 } = require("../../DataBase/wa_conf");

const emojis = [
  "🎐","👍","❤️","😂","😮","😢","😡","🎉","🔥","🙏",
  "💯","✨","🎈","🤖","👀","🌟","😎","🤩","💥","🎶",
  "😄","😆","😉","😊","😋","😜","😝","😛","🤑","🤗",
  "🤔","😳","😱","😨","😰","😥","😭","😓","😪","😴",
  "🙄","🤐","😷","🤒","🤕","😵","🤠","😇","🤡","👹",
  "👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻",
  "😼","😽","🙀","😿","😾","🙌","👏","🤝","👍","👎",
  "👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈",
  "👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙",
  "💪","🦵","🦶","👂","👃","👣","👁","👀","🧠","🦷",
  "🦴","👅","👄","💋","👓","🕶","🥽","🥼","🦺","👔",
  "🎐","👍","❤️","😂","😮","😢","😡","🎉","🔥","🙏",
  "💯","✨","🎈","🤖","👀","🌟","😎","🤩","💥","🎶",
  "😄","😆","😉","😊","😋","😜","😝","😛","🤑","🤗",
  "🤔","😳","😱","😨","😰","😥","😭","😓","😪","😴",
  "🙄","🤐","😷","🤒","🤕","😵","🤠","😇","🤡","👹",
  "👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻",
  "😼","😽","🙀","😿","😾","🙌","👏","🤝","👍","👎",
  "👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈",
  "👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙",
  "💪","🦵","🦶","👂","👃","👣","👁","👀","🧠","🦷",
  "🦴","👅","👄","💋","👓","🕶","🥽","🥼","🦺","👔",
  "🎐","👍","❤️","😂","😮","😢","😡","🎉","🔥","🙏",
  "💯","✨","🎈","🤖","👀","🌟","😎","🤩","💥","🎶",
  "😄","😆","😉","😊","😋","😜","😝","😛","🤑","🤗",
  "🤔","😳","😱","😨","😰","😥","😭","😓","😪","😴",
  "🙄","🤐","😷","🤒","🤕","😵","🤠","😇","🤡","👹",
  "👺","💀","👻","👽","🤖","💩","😺","😸","😹","😻",
  "😼","😽","🙀","😿","😾","🙌","👏","🤝","👍","👎",
  "👊","✊","🤛","🤜","🤞","✌️","🤟","🤘","👌","👈",
  "👉","👆","👇","☝️","✋","🤚","🖐","🖖","👋","🤙",
  "💪","🦵","🦶","👂","👃","👣","👁","👀","🧠","🦷",
  "🦴","👅","👄","💋","👓","🕶","🥽","🥼","🦺","👔"
];

function getRandomEmoji() {
  return emojis[Math.floor(Math.random() * emojis.length)];
}

async function autoread_msg(ovl, key) {
  const config = await WA_CONF2.findOne({ where: { id: "1" } });
  if (config && config.autoread_msg === "oui") {
    try {
      await ovl.readMessages([key);
    } catch (e) {
      console.error("Erreur autoread_msg:", e);
    }
  }
}

async function autoreact_msg(ovl, message) {
  const config = await WA_CONF2.findOne({ where: { id: "1" } });
  if (config && config.autoreact_msg === "oui") {
    const emoji = getRandomEmoji();
    try {
      await ovl.sendMessage(message.key.remoteJid, {
        react: { text: emoji, key: message.key }
      });
    } catch (e) {
      console.error("Erreur autoreact_msg:", e);
    }
  }
}

module.exports = { autoread_msg, autoreact_msg };
